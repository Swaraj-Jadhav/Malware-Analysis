# Dynamic Malware Analysis

Dynamic analysis involves examining the malware's behaviour while execution in a controlled enviroment. The primary goals of dynamic analysis include:

- **Process Activity:**  Monitoring process creation, termination, and inter-process communications.
  
- **Network Activity:** Identifying outbound network traffic and DNS requests initiated by the malware and analyzing communication with Command and Control (C2) servers.

- **Registry Activity:** Tracking registry key creation, modification, and deletion.

- **Persistance Mechanism:** Detecting techniques used by the malware to achieve persistence across reboots.


## Process Activity
For this activity we've got a new malware sample named as **e-archive.zip** so let's start with unzipping the file. Afer unzipping we get a .bin file which we will convert into a .exe for execution purpose now we are going to get the first shot on **Regshot** because now we don't have malware on our system we will take the second shot when the malware is executed and compare both shots

![Screenshot (20)](https://github.com/user-attachments/assets/6b78a226-7767-449f-991b-fa646eed73a5)

Now, we will let **procmon**(process moniter) and **Wireshark run** for a while and gather all the information . After 3-4 min stop wireshark and procmon go to the Process Tree option in procmon and look for the our malware sample file. In our malware we found a lot of stuff running under the hud which was not meant to be there.

![Screenshot (23)](https://github.com/user-attachments/assets/c323bcf8-31d5-43ed-a262-8dfc71c371d2)

We can observe schedule task which is basically used for persistance mechanism in malware and powershell running in the background we can check for the command that it is executing in the powershell. The command is trying to create it's own malware and execute it. The name of the malware file is **vbx.exe**.
Now we go to windows task scheduler and look for our malware in updates 

![Screenshot (24)](https://github.com/user-attachments/assets/491bbc5f-b2bf-4ec0-9abf-5fb723c7c514)

Here we can see that the attacker has set a condition to trigger the malware **at log-on**, It means whenever you try to log on to your device it will trigger the malware to do a certain task in this case the task is to execute it's own malware.

## Network Activity
To check for any network anamolies we are mainly using **Wireshark** for this experiment. We are looking for any outbound network traffic so we will focus on protocols like smtp, http, dns. After filterning we did'nt find any outbound traffic for smtp and http but we found some suspecious activity in dns filter. A request was made to a suspecious website **5gw4d.xyz**.

![Screenshot (26)](https://github.com/user-attachments/assets/470ffa19-5f1d-49e6-91ae-2eb4a0ff437c)

Let,s find out the ip address of the website and find out where is this comming from, we are using a webise named **maxmind.com** for find the geological location of the ip address, we came to know that the ip is from florida,USA.

![Screenshot (29)](https://github.com/user-attachments/assets/22c5e64d-4a03-4cfa-95e3-eb47aeff44df)

## Registry Activity
Now that the malware is totally executed we will get the second shot on **Regshot** and then clik on the comapare and output option on regshot, now we will get a txt file including all the information about added, deleted keys, etc. Usually the malware is stored in the startup folder so we will look for any added or modified keys or values in the output file related to startup files.

![Screenshot (30)](https://github.com/user-attachments/assets/d54abe0d-30bb-4969-97d5-56ad240762b0)

We successfully found an added key which deals with schedule task and the name out malware is also mention here.

## Persistance mechanism
Persistance mechanism refers to the technique that the malware uses to stay executed in the system for as long as possible. Most malwares hide in the startup files to execute whenever the system turn on, so we will start looking for any suspecious activity in the startup files

![Screenshot (31)](https://github.com/user-attachments/assets/f78f1ffc-bc5d-448f-a243-251ca5afafd2)

As we discussed earlier the malware was executing it's own malware, it turns out that the new malware was being executed from the start file we can notice this in the task scheduler in the actions tab.
